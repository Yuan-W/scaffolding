{% extends "layout.html" %}

{% block script %}
<!-- Flot Charts JavaScript -->
<script src="{{ url_for('static', filename='vendor/flot/excanvas.min.js') }} "></script>
<script src="{{ url_for('static', filename='vendor/flot/jquery.flot.js') }} "></script>
<script src="{{ url_for('static', filename='vendor/flot/jquery.flot.pie.js') }} "></script>
<script src="{{ url_for('static', filename='vendor/flot/jquery.flot.resize.js') }} "></script>
<script src="{{ url_for('static', filename='vendor/flot/jquery.flot.time.js') }} "></script>
<script src="{{ url_for('static', filename='vendor/flot-tooltip/jquery.flot.tooltip.min.') }} js"></script>
<script>

$(function() {

    var lineData = {
        label: "average",
        data: [[0, 233], [6, 233]],
        lines: {
                    show: true,
                    lineWidth: 1
                }
    };

    var barOptions = {
        grid: {
            hoverable: true
        },
        legend: {
            show: false
        }
    };
    var barData = {
        label: "bar",
        data: [{% for i, time in times %}
                    {{ [i,time] }},
                    {% endfor %}
                    ],
        bars: {
                show: true,
                barWidth: 0.3
            }
    };
    $.plot($("#flot-bar-chart"), [barData, lineData], barOptions);

});
</script>
{% endblock %}

{% block body %}
<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Dashboard</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Exercises
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Number of Students Participated</th>
                                <th>Average Time Spent</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for exercise in exercises %}
                            <tr class="odd gradeX">
                                <td class="center">{{exercise['name']}}</td>
                                <td class="center">{{exercise['students_count']}}</td>
                                <td class="center">{{exercise['average_time_spent']}}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    Students
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Number of Exercise Taken</th>
                                <th>Average Hints Requested</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for student in students %}
                            <tr class="odd gradeX">
                                <td class="center">{{student['name']}}</td>
                                <td class="center">{{student['exercise_count']}}</td>
                                <td class="center">{{student['average_hints']}}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Bar Chart Example
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="flot-chart">
                        <div class="flot-chart-content" id="flot-bar-chart"></div>
                    </div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-6 -->
    </div>
    <!-- /.row -->
</div>
<!-- /#page-wrapper -->
{% endblock %}



